--1. PREVIO A LA IMPORTACION
PHOENIX.FILE_IMPORTER_GROUP --DOMINIO DE ARCHIVOS A IMPORTAR
TAG_ARCHIVO, PATH_ENTRADA, ACTIVO

TAG_ARCHIVO VARCHAR(20)
PATH_ENTRADA VARCHAR(100)
ACTIVO CHAR(1)
--
Por favor, me generas el script oracle para generar la tabla FILE_IMPORTER_GROUP_EXT, con las siguientes columnas, con sus nombres en ingles
TAG_ARCHIVO VARCHAR(20)
PATH_ENTRADA VARCHAR(100)
ACTIVO CHAR(1)
--

CREATE TABLE FILE_IMPORTER_GROUP (
    FILE_TAG        VARCHAR2(20) NOT NULL,
    INPUT_PATH      VARCHAR2(100) NOT NULL,
    IS_ACTIVE       CHAR(1) DEFAULT 'N' NOT NULL,
    CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_TAG)
);


PHOENIX.FILE_IMPORTER_GROUP_EXT --EXTENSIONES
TAG_ARCHIVO, EXTENSION, ACTIVO

CREATE TABLE FILE_IMPORTER_GROUP_EXT (
    FILE_TAG        VARCHAR2(20) NOT NULL,
    EXTENSION      VARCHAR2(20) NOT NULL,
    IS_ACTIVE       CHAR(1) DEFAULT 'N' NOT NULL,
    CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_TAG)
);

--CONFIGURACION DEL PROCESO A EJECUTAR Y OTROS
PHOENIX.FILE_IMPORTER_PROCESS P
TAG_ARCHIVO, NOMBRE_SP, ANCHO_FIJO, CARACTER_SEPARACION, ACTIVO

CREATE TABLE FILE_IMPORTER_PROCESS (
    FILE_TAG        VARCHAR2(20) NOT NULL,
    SP_NAME			VARCHAR2(100), 
	FIXED_W 		CHAR(1) DEFAULT 'N' NOT NULL, 
	CHAR_SEPARATION CHAR(1),
	IS_ACTIVE       CHAR(1) DEFAULT 'N' NOT NULL,
    CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_TAG)
);

------------------------------------------------------------------------------
--2. POST IMPORTACION

PHOENIX.FILE_IMPORTER_FILE F
TAG_ARCHIVO, NOMBRE ARCHIVO, FECHA_MODIFICACION, FECHA_PROCESO, ID_ARCHIVO

CREATE TABLE FILE_IMPORTER_FILE (
    FILE_TAG        VARCHAR2(20) NOT NULL,
    FILE_NAME		VARCHAR2(100), 
	D_MODIFICATION 	DATETIME,
	D_PROCESS	 	DATETIME,	
	FILE_ID			NUMBER,
    CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_ID)
);

--AQUI ESTAN LOS ARCHIVOS IMPORTADOS

ID_ARCHIVO, FECHA_PROCESO, ID_DETALLE_ARCHIVO, NUM_FILA,  FILA
PHOENIX.FILE_IMPORTER_FILE_DET--DETALLE DEL ARCHIVO IMPORTADO

CREATE TABLE FILE_IMPORTER_FILE_DET (
	FILE_ID			NUMBER NOT NULL,
	FILE_DET_ID		NUMBER NOT NULL,
	D_PROCESS	 	DATETIME,	
    ROW_N			NUMBER;
	ROW				VARCHAR2(2000), 
    CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_ID, FILE_DET_ID)
);

--(tabla nueva)
FILE_IMPORTER_MAP
TAG_ARCHIVO, NUM_CAMPO, NOMBRE_CAMPO, COL_INICIO, COL_FIN

CREATE TABLE FILE_IMPORTER_MAP (
	FILE_TAG        VARCHAR2(20) NOT NULL,
	FIELD_NUM		NUMBER NOT NULL,
	FIELD_NAME		VARCHAR2(50),
	HOME_COL		NUMBER,
	FINAL_COL		NUMBER,
	CONSTRAINT PK_FILE_IMPORTER_GROUP PRIMARY KEY (FILE_TAG, FIELD_NUM)
);

--------------------------------------------------------------------------------------------------------

Pasos basicos de funcionamiento

SP DE ESCUCHA, QUE BUSCA LOS ARCHIVOS CANDIDATOS DESDE LAS TABLAS FILE_IMPORTER_GROUP, FILE_IMPORTER_GROUP_EXT
	EN CASO DE HABER CANDIDATOS, SE LEEN SUS REGISTROS HACIA LAS TABLAS FILE_IMPORTER_FILE y FILE_IMPORTER_FILE_DET
	LUEGO LEER AL SP/PARAMETROS ESPECIFICADOS EN FILE_IMPORTER_PROCESS, LLAMANDOLOS DE MANERA DINAMICA(SP SP_READ_FILE_IMPORTER_DATA, PARAMETRIZANDO CON TAG)
		EL SP SP_READ_FILE_IMPORTER_DATA, VA A LLAMAR AL SP DINAMICO, EL CUAL SE ENCARGARA DE ENVIAR LA INFO DEL ARCHIVO HACIA LA TABLA DE PROCESO(DEBERIA SER TEMPORAL)